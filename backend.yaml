- name: Configure backend server
  hosts: backend
  become: yes
  vars:

  tasks:
  - name: Disable default nodejs
    ansible.builtin.command: dnf module disable nodejs -y

  - name: Enable nodejs:20
    ansible.builtin.command: dnf module enable nodejs:20 -y
  
  - name: Install nodejs
    ansible.builtin.dnf: # only works for redhat family
      name: "{{item}}"
      state: installed
    loop:
    - nodejs
    - mysql

  - name: Create Expense user
    ansible.builtin.user:
      name: expense